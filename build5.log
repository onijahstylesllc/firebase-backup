
> nextn@0.1.0 build /home/engine/project
> NODE_ENV=production next build && pnpm run verify:bundle

âš  No build cache found. Please configure build caching for faster rebuilds. Read more: https://nextjs.org/docs/messages/no-cache
Attention: Next.js now collects completely anonymous telemetry regarding usage.
This information is used to shape Next.js' roadmap and prioritize features.
You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
https://nextjs.org/telemetry

   â–² Next.js 15.5.6
   - Environments: .env.local

   Creating an optimized production build ...
 âš  Compiled with warnings in 30.8s

./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
Critical dependency: the request of a dependency is an expression

Import trace for requested module:
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/index.js
./node_modules/.pnpm/@opentelemetry+sdk-node@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/sdk.js
./node_modules/.pnpm/@opentelemetry+sdk-node@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/index.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/tracing/node-telemetry-provider.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/node.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/common.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/index.mjs
./src/ai/genkit.ts
./src/app/api/ai/chat/route.ts

./node_modules/.pnpm/express@4.21.2/node_modules/express/lib/view.js
Critical dependency: the request of a dependency is an expression

Import trace for requested module:
./node_modules/.pnpm/express@4.21.2/node_modules/express/lib/view.js
./node_modules/.pnpm/express@4.21.2/node_modules/express/lib/application.js
./node_modules/.pnpm/express@4.21.2/node_modules/express/lib/express.js
./node_modules/.pnpm/express@4.21.2/node_modules/express/index.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/reflection.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/index.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/common.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/index.mjs
./src/ai/genkit.ts
./src/app/api/ai/chat/route.ts

./node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/index.js
Critical dependency: require function is used in a way in which dependencies cannot be statically extracted

Import trace for requested module:
./node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/index.js
./node_modules/.pnpm/@opentelemetry+sdk-node@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/sdk.js
./node_modules/.pnpm/@opentelemetry+sdk-node@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/index.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/tracing/node-telemetry-provider.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/node.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/common.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/index.mjs
./src/ai/flows/ai-compress-document.ts

./node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/index.js
Critical dependency: require function is used in a way in which dependencies cannot be statically extracted

Import trace for requested module:
./node_modules/.pnpm/require-in-the-middle@7.5.2/node_modules/require-in-the-middle/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/instrumentation.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/node/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/platform/index.js
./node_modules/.pnpm/@opentelemetry+instrumentation@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/index.js
./node_modules/.pnpm/@opentelemetry+sdk-node@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/sdk.js
./node_modules/.pnpm/@opentelemetry+sdk-node@0.52.1_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/sdk-node/build/src/index.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/tracing/node-telemetry-provider.js
./node_modules/.pnpm/@genkit-ai+core@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0__ayuwo7uovu3jia6oyvlu26duty/node_modules/@genkit-ai/core/lib/node.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/common.js
./node_modules/.pnpm/genkit@1.22.0_@google-cloud+firestore@7.11.6_firebase-admin@12.7.0_firebase@11.10.0/node_modules/genkit/lib/index.mjs
./src/ai/genkit.ts
./src/app/api/ai/chat/route.ts



Retrying 1/3...
 âœ“ Compiled successfully in 44s
   Linting and checking validity of types ...
Failed to compile.

./src/app/api/ai/chat/route.ts:99:24
Type error: Property 'ip' does not exist on type 'NextRequest'.

[0m [90m  97 |[39m     [90m// Get user identifier for rate limiting (prefer user ID, fallback to IP)[39m
 [90m  98 |[39m     [36mconst[39m userId [33m=[39m session[33m.[39muser[33m.[39mid[33m;[39m
[31m[1m>[22m[39m[90m  99 |[39m     [36mconst[39m ip [33m=[39m request[33m.[39mip [33m||[39m request[33m.[39mheaders[33m.[39m[36mget[39m([32m'x-forwarded-for'[39m) [33m||[39m [32m'unknown'[39m[33m;[39m
 [90m     |[39m                        [31m[1m^[22m[39m
 [90m 100 |[39m     [36mconst[39m identifier [33m=[39m userId [33m||[39m ip[33m;[39m
 [90m 101 |[39m
 [90m 102 |[39m     [90m// Apply rate limiting[39m[0m
Next.js build worker exited with code: 1 and signal: null
â€‰ELIFECYCLEâ€‰ Command failed with exit code 1.
